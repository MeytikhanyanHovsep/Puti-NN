"use client";
import { Hospital, MapPin, Video, Clock, Users } from "lucide-react";
import Title from "../common/title";
import ServiceCard from "../serviceCard";
import { useEffect, useMemo, useState } from "react";

// ,
type Props = {
    geoAllowed: boolean | null;
    isTargetCity: string | null;
};

export default function Services({ geoAllowed, isTargetCity }: Props) {
    const iconsStyles = "w-[35px] h-[35px] max-md:w-[30px] ";
    const initialServices: any = [
        {
            title: "Стационарный предрейсовый осмотр",
            name: "Классическое и надежное решение для вашего автопарка",
            description:
                "Приводите ваших водителей в наш современно оборудованный медицинский кабинет для прохождения обязательного предрейсового контроля. Этот вариант идеально подходит для компаний, чей офис или гараж находится в удобной доступности от нашего расположения. Мы обеспечили все условия для быстрого и комфортного осмотра.",
            keys: [
                "Оснащение по стандарту: Кабинет укомплектован всеми необходимыми приборами (алкотестер, тонометр, термометр и др.).",
                "Без очередей: Четкая организация приема по предварительной записи или графику.",
                "Полный пакет документов: Официальное заключение и заверка путевого листа штампом и подписью медработника.",
                "Экономия ваших средств: Один из самых выгодных форматов для регулярных осмотров.",
            ],
            icon: <Hospital className={iconsStyles} />,
            showMore: false,
        },
        {
            title: "Выездной предрейсовый осмотр",
            name: " Профессионалы приедут к вам — сохраните время и ресурсы",
            description:
                "Наш мобильный медицинский пункт работает прямо на вашей территории: в гараже, на стоянке или в офисе. Это максимально удобное решение для крупных автопарков и компаний, ценящих собственное время. Мы подстраиваемся под ваш график выхода водителей на смену.",
            keys: [
                " Осмотр без простоев: Водители проходят контроль, не отходя от рабочего места.",
                "Мобильность и гибкость: Выезжаем в удобную для вас дату и время, в том числе в ранние часы.",
                "Полный функционал: Используем переносное профессиональное оборудование, обеспечивающее точность измерений.",
                "Охват больших коллективов: Идеально для одновременного осмотра большого количества водителей.",
            ],
            icon: <MapPin className={iconsStyles} />,
            showMore: false,
        },

        {
            title: "Послерейсовый медицинский осмотр",
            name: "Завершите рабочий день по всем правилам",
            description:
                "Обязательная процедура для водителей, завершающих рабочую смену. Осмотр позволяет зафиксировать состояние здоровья сотрудника после рейса, что особенно важно при работе с пассажирскими перевозками, опасными грузами и при ненормированном графике. Это ключевой элемент корпоративной ответственности.",
            keys: [
                "Контроль утомления: Оцениваем состояние водителя после длительной или сложной поездки.",
                "Защита от претензий: Документальное подтверждение отсутствия признаков переутомления или иных отклонений по окончании рейса.",
                "Дисциплина и порядок: Формируем ответственное отношение к труду и соблюдению режима.",
                "Полный цикл обслуживания: Обеспечиваем юридическое сопровождение рабочего дня от выезда до возврата.",
            ],
            icon: <Clock className={iconsStyles} />,
            showMore: false,
        },
        {
            title: "Предсменные и послесменные осмотры",
            name: "Комплексный контроль для предприятий с непрерывным циклом работы",

            description:
                "Специализированная услуга для компаний, чьи сотрудники (не только водители) работают вахтовым методом или в сменном графике, связанном с источниками повышенной опасности. Мы организуем полный цикл медицинского контроля: перед началом и по окончании рабочей смены.",
            keys: [
                "Широкий охват: Подходит для водителей, операторов станков, строителей и других специалистов.",
                "Соблюдение ТК РФ: Помогаем выполнить требования трудового законодательства по охране труда.",
                "Повышение производственной безопасности: Своевременно выявляем сотрудников, не готовых к выполнению обязанностей.",
                "Гибкий формат: Проводим осмотры стационарно, с выездом на предприятие или дистанционно.",
            ],

            icon: <Users className={iconsStyles} />,
            showMore: false,
        },
    ];
    const onlineService = useMemo(
        () => ({
            title: "Дистанционный предрейсовый осмотр (Online)",
            name: "Современные технологии для мобильных команд и удаленных сотрудников",
            description:
                "Инновационное решение для осмотра водителей, находящихся в любой точке с доступом в интернет. Процесс проходит через защищенный видео-канал с использованием электронной цифровой подписи (ЭЦП). Юридически полноценная и легальная альтернатива очному визиту.",
            keys: [
                "Скорость и доступность: Осмотр из любого места 24/7.",
                "Решение для удаленных водителей: Идеально для курьеров, логистов и сотрудников на удаленке.",
                "Полная законность: Все заключения соответствуют требованиям законодательства и имеют юридическую силу.",
                "Электронный документооборот: Мгновенное оформление и отправка цифрового заключения, интеграция с вашими системами.",
            ],
            icon: <Video className={iconsStyles} />,
            showMore: false,
        }),
        [iconsStyles]
    );

    const [services, setServices] = useState<any[]>([]);

    useEffect(() => {
        setServices(() => {
            if (isTargetCity) {
                return [...initialServices, onlineService];
            } else if (!isTargetCity && geoAllowed) {
                return [onlineService, ...initialServices];
            } else {
                return [
                    ...initialServices.slice(0, 2),
                    onlineService,
                    ...initialServices.slice(2),
                ];
            }
        });
    }, [isTargetCity, geoAllowed, onlineService]);

    return (
        <>
            <section
                id="services"
                className="container pt-[70px] flex flex-col items-start gap-[40px] max-sm:gap-[20px]"
            >
                <Title as="h2">Основные услуги</Title>
                <div className="grid max-lg:grid-cols-2 max-sm:grid-cols-1 max-md:gap-y-[7px] max-md:gap-x-[5px] grid-cols-3 gap-[20px]">
                    {services.map((e: any, i: number) => (
                        <ServiceCard service={e} ind={i} key={i} />
                    ))}
                </div>
            </section>
        </>
    );
}
